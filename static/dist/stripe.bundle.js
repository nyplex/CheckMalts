(()=>{const e=Stripe("pk_test_51KyyMtEUSVW7Sz1sy5Jl5Lu3V8WargxHJh4yfUGKupPIRwZ7oxurpMWedQ9z1SXipvxMTdKk5U2CxnXVVQ2cV05S00WBkcxrrj");let t,n;function r(e){const t=document.querySelector("#payment-message");t.classList.remove("hidden"),t.classList.add("text-red-700"),t.textContent=e}function o(e){e?(document.querySelector("#submitPayment").disabled=!0,document.querySelector("#submitPaymentMobile").disabled=!0,document.querySelector("#spinner").classList.remove("hidden"),document.querySelector("#spinnerMobile").classList.remove("hidden"),document.querySelector("#button-text").classList.add("hidden"),document.querySelector("#button-text-mobile").classList.add("hidden")):(document.querySelector("#submitPayment").disabled=!1,document.querySelector("#submitPaymentMobile").disabled=!1,document.querySelector("#spinner").classList.add("hidden"),document.querySelector("#spinnerMobile").classList.add("hidden"),document.querySelector("#button-text").classList.remove("hidden"),document.querySelector("#button-text-mobile").classList.add("hidden"))}!async function(){const r=await fetch("create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"}}),{clientSecret:o,order_number:c}=await r.json();n=c,t=e.elements({appearance:{theme:"night",labels:"floating",variables:{colorPrimary:"#ffffff",colorBackground:"#000000",colorDanger:"#ff5858",colorDangerText:"#ff5858"}},clientSecret:o}),t.create("payment").mount("#payment-element")}(),async function(){const t=new URLSearchParams(window.location.search).get("payment_intent_client_secret");if(!t)return;const{paymentIntent:n}=await e.retrievePaymentIntent(t);switch(n.status){case"succeeded":r("Payment succeeded!");break;case"processing":r("Your payment is processing.");break;case"requires_payment_method":r("Your payment was not successful, please try again.");break;default:r("Something went wrong.")}}(),document.querySelector("#payment-form").addEventListener("submit",(async function(c){c.preventDefault(),o(!0);const{error:a}=await e.confirmPayment({elements:t,confirmParams:{return_url:"http://127.0.0.1:8000/checkout/confirmation/"+n}});"card_error"===a.type||"validation_error"===a.type?r(a.message):r("An unexpected error occured."),o(!1)}))})();